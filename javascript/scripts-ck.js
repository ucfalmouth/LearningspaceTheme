/*$(window).load(function(){
  NProgress.done();
});

NProgress.start();
NProgress.configure({ ease: 'ease', speed: 500 });*/// remove space fron anchors in key information
$(".block_section a").each(function(){var e=$(this);e.html(e.html().replace(/&nbsp;/g,""))});$("a[rel=popover]").popover({html:!0,content:function(){return $("#settingsnav").html()}});$(document).ready(function(){document.createElement("header");document.createElement("nav");document.createElement("section");document.createElement("article");document.createElement("aside");document.createElement("footer");document.createElement("i");($(".path-mod").length!=0||$(".path-question").length!=0||$(".path-blocks").length!=0)&&$(".breadcrumb li").each(function(){var e=$(this).find("a").attr("href");if(e.indexOf("category")>=0)return!0;if(e.indexOf("course")>=0){$("div[role=main]").prepend('<a href="'+e+'" id="back-to-module" class="btn"><i class="fa fa-arrow-circle-left"></i> Back to module</a>');return!1}});var e="http://google.com",t=$('.block_settings a[href$="edit=on"]').attr("href");$("a.turn-edit-on").attr("href",t);var n=$('.block_settings a[href$="edit=off"]').attr("href");$("a.turn-edit-off").attr("href",n);var r=$("#settingsnav").find('a[href*="question"]').attr("href");$("#user_context_block").find(".question-bank-button").attr("href",r);var i=$("#settingsnav").find('a[href*="switchrole=5"]').attr("href");$("#user_context_block").find(".switch-to-student-button").attr("href",i);var s=$("#settingsnav").find('a[href*="enrol/users.php?id="]').attr("href");$("#user_context_block").find(".subscribed-users").attr("href",s);var o=$("#settingsnav").find('a[href*="enrol/index.php?id="]').attr("href");$("#user_context_block").find(".enrolment-methods").attr("href",o);var u=$("#settingsnav").find('a[href*="group/instances.php?id="]').attr("href");$("#user_context_block").find(".enrolment-methods").attr("href",u);var a=$("#userrole").data("role");if(a=="student"){$("#student_context_block").show();$(".block_settings").hide()}else a=="teacher"?$(".block_settings .commands").hide():a=="admin"&&$("#toggle-admin-settings").show();$(".block_settings .header .title").click(function(){$(".block_settings").find(" .content").slideToggle()});var f=$('<i class="fa highlightedIcon fa-asterisk"></i>');$(".topics").find(".current").prepend(f);$(".path-mod-forum").length!=0&&$(".path-mod-forum").find("#id_submitbutton2").val("Create forum");$("#.loginbox h2").text("Log In");var l=$(".editing h2.main").text().replace("Summary of ","");$("#id_name").attr("placeholder",l);$(".login-page").backstretch(["http://learn-dev.falmouth.ac.uk/theme/learningspace/img/rough_wood_boards-wallpaper-1920x1200.jpg","http://learn-dev.falmouth.ac.uk/theme/learningspace/img/wave_7-wallpaper-1920x1200.jpg","http://learn-dev.falmouth.ac.uk/theme/learningspace/img/wet_maple_leaf_close_up-wallpaper-1920x1200.jpg"],{duration:5e3,fade:750});var c=function(){var e=$(".navbar-fixed-top").find(".menu-item-my-courses"),t=$(".navbar-fixed-top").find(".menu-item-resources"),n=$("#page-header").find(".breadcrumb"),r=$(".navbar-fixed-top").find(".nav.pull-right"),i=$("#region-pre").find(".block_course_menu"),s=$("#region-pre").find(".block_html"),o=$("#region-main").find(".section-navigation.mdl-bottom"),u=$("#region-main").find(".course-content");e.attr("step",1);e.attr("intro","My Courses will take you to a list of all the modules you have subscribed to.");t.attr("step",2);t.attr("intro","Quick links to services available to support your learning.");r.attr("step",3);r.attr("intro","My menu is where you can edit your Profile, get Help with the Learning Space and Log out.");n.attr("step",4);n.attr("intro","The Breadcrumb is to let you know where you are. All breadcrumb items are links.");i.attr("step",5);i.attr("intro","The Section menu will take you straight to a relevant topic or week in the current module. It can also show you all sections on one page.");u.attr("step",6);u.attr("intro","This is where your Learning Material will appear.");o.attr("step",7);o.attr("intro","Click these to navigate through your Learning.");s.attr("step",8);s.attr("intro","These contextual links are relevant to the current page. e.g. taking you from a module to the relevant course or to other modules on that course.");$.getScript("../theme/learningspace/javascript/intro.js",function(e,t,n){console.log(t);console.log(n.status);console.log("Load was performed.")})};if($("body").hasClass("course-661")){c();$("body").on("click",".btn",function(){introJs().start()})}var h=$('<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu"></ul>');$(".module-dropdown").append(h);var p=$(".topics > #section-0 > .content > ul.section").html(),d=$('<a href="#" class="blockSectionEdit">Add a menu item</a>');$(".module-dropdown").on("click",".blockSectionEdit",function(){$("#section-0 .section-modchooser-text").trigger("click")});$(".module-dropdown").find(".dropdown-menu").append(p);$("body").hasClass("editing")&&$(".module-dropdown").find(".dropdown-menu").append(d);var v=$(".breadcrumb"),m=v.find("li").last().prev().find("a"),g=v.find("li").last().prev().prev().find("a");m.length?m=m.attr("href"):m=v.find("li").last().prev().prev().find("a").attr("href");g.length?g=g.attr("href"):g=v.find("li").last().prev().prev().find("a").attr("href");$("#page-mod-quiz-view").length!=0?$(".pagelayout-incourse").find(".back-to-mod").attr("href",g):$(".pagelayout-incourse").find(".back-to-mod").attr("href",m);$(".unlist").find(".name > a").each(function(){var e=$(this).attr("href")+"&section=1";$(this).attr("href",e)});$("#id_dtstart_day").tooltip({title:"Day",animation:"true"});$("#id_dtstart_month").tooltip({title:"Month",animation:"true"});$("#id_dtstart_year").tooltip({title:"Year",animation:"true"});$("#id_dtstart_hour").tooltip({title:"Hour",animation:"true"});$("#id_dtstart_minute").tooltip({title:"Minute",animation:"true"});$("#id_dtdue_day").tooltip({title:"Day",animation:"true"});$("#id_dtdue_month").tooltip({title:"Month",animation:"true"});$("#id_dtdue_year").tooltip({title:"Year",animation:"true"});$("#id_dtdue_hour").tooltip({title:"Hour",animation:"true"});$("#id_dtdue_minute").tooltip({title:"Minute",animation:"true"});$("#id_dtpost_day").tooltip({title:"Day",animation:"true"});$("#id_dtpost_month").tooltip({title:"Month",animation:"true"});$("#id_dtpost_year").tooltip({title:"Year",animation:"true"});$("#id_dtpost_hour").tooltip({title:"Hour",animation:"true"});$("#id_dtpost_minute").tooltip({title:"Minute",animation:"true"});$(".user_profile_pic").tooltip();$(".pagelayout-admin tr:odd").addClass("odd");$(".pagelayout-course").length==0&&$("footer").on("click","#toggle-admin-settings",function(e){e.preventDefault();$("#region-pre").slideToggle()});$(".pagelayout-course").length!=0&&$("footer").on("click","#toggle-admin-settings",function(e){e.preventDefault();$(".block_settings").toggle()});var y='<span class="toggle"><i class="fa fa-fullscreen pull-right"></i></span>';$(".pagelayout-admin .breadcrumb").append(y);$(".pagelayout-standard .breadcrumb").append(y);$(".pagelayout-report .breadcrumb").append(y);$(".pagelayout-base .breadcrumb").append(y);$(".pagelayout-incourse .breadcrumb").append(y);$(".breadcrumb").on("click",".toggle",function(){$("#wrapper .container-fluid").toggleClass("wide")});$("#page-login-index").length!=0&&$.getScript("http://teamet.tumblr.com/api/read/json",function(e,t,n){console.log("Tumblr API Loaded OK: "+t);console.log(n.status);console.log("Load was performed.");(function(){var e=tumblr_api_read.posts.length;for(var t=0;t<e;t++){var n=tumblr_api_read.posts[t],r=n.tags;if(r.indexOf("Open Design")>-1){var i=n["link-text"],s=n["link-description"],o=s.replace(/<(?:.|\n)*?>/gm,"");popoverContent=o.substring(0,120);popoverContent+="... ";popoverContent+="<br /><a href=http://teamet.tumblr.com/tagged/Open-Design>Read More</a>";console.log(popoverContent);var u='<span id="LSUpdateDisplaysInfo" class="btn pull-left btn-success" rel="popover" data-content="'+popoverContent+'" data-original-title="'+i+"\">What's Changing?</span>";$("#LSUpdateDisplaysInfoPlaceholder").replaceWith(u);$("#LSUpdateDisplaysInfo").popover({placement:"top",html:!0,trigger:"click"});return}}})()});if($("#page-login-index").length!=0)var b=function(){var e=13929098e5,t=(new Date).getTime(),n=1381307383e3,r=6e4,i=r*60,s=i*24,o=s*30,u=s*365,a=t-e;a=Math.abs(a);var f="";a<r?timeToGo=Math.round(a/1e3)+" seconds until the next update":a<i?timeToGo=Math.round(a/r)+" minutes until the next update":a<s?timeToGo=Math.round(a/i)+" hours until the next update":a<o?timeToGo=Math.round(a/s)+" days until the next update":a<u?timeToGo=Math.round(a/o)+" months until the next update":timeToGo=Math.round(a/u)+" years until the next update";$("#LSUpdateDisplays").append('<p class="timeToGo">'+timeToGo+"</p>");var l=(t-n)/(e-n)*100;console.log(l);var c=Raphael("updates-clock-canvas",30,30);c.customAttributes.arc=function(e,t,n,r,i){var s=360/r*n,o=(90-s)*Math.PI/180,u=e+i*Math.cos(o),a=t-i*Math.sin(o),f;r==n?f=[["M",e,t-i],["A",i,i,0,1,1,e-.01,t-i]]:f=[["M",e,t-i],["A",i,i,0,+(s>180),1,u,a]];return{path:f}};var h=c.path().attr({stroke:"#b7beb6","stroke-width":7,arc:[15,15,0,100,10]});h.animate({arc:[15,15,l,100,10]},1500,"bounce")}();$("#updates-clock-canvas").tooltip({title:$(".timeToGo").html(),animation:"true"});$("#responsive-menu-button").sidr({name:"sidr-main",speed:200,body:"#region-main, .navbar-fixed-top",source:"#region-pre, #user-context-menu"});$("#responsive-menu-button").click(function(e){$(".icon-reorder").toggle();$(".icon-remove-circle").toggle();$(".brand").fadeToggle();e.preventDefault()});$(".pagelayout-course").length==0&&$(".modal-backdrop, #myModal .close, #myModal .btn").live("click",function(){$("#myModal iframe").attr("src",jQuery("#myModal iframe").attr("src"))});if($("#page-login-index").length!=0){var w=!1,E=!1,S=!1;function x(e){var t=new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);console.log(e);console.log(t.test(e));return t.test(e)}$("#input-email").on("keyup",function(){var e=$(this).val();if(!x(e)){w=!1;console.log("It's not valid");T();$(this).closest(".control-group").removeClass("success");$(this).closest(".controls").find(".icon-ok").hide()}else if(x(e)){console.log("It's valid, hooray!");w=!0;$(this).closest(".controls").find(".icon-ok").show();$(this).closest(".control-group").addClass("success");$(this).closest(".control-group").removeClass("error");$(this).closest(".controls").find(".icon-remove").hide();$(this).closest(".controls").find(".help-block").hide();T()}});$("#form-first-name").on("keyup",function(){var e=$(this).val();if(e!=""){E=!0;$(this).closest(".controls").find(".icon-ok").show();$(this).closest(".control-group").addClass("success");$(this).closest(".control-group").removeClass("error");$(this).closest(".controls").find(".icon-remove").hide();$(this).closest(".controls").find(".help-block").hide()}else if(e==""){E=!1;$(this).closest(".control-group").removeClass("success");$(this).closest(".controls").find(".icon-ok").hide()}T()});$("#form-last-name").on("keyup",function(){var e=$(this).val();if(e!=""){S=!0;$(this).closest(".controls").find(".icon-ok").show();$(this).closest(".control-group").addClass("success");$(this).closest(".control-group").removeClass("error");$(this).closest(".controls").find(".icon-remove").hide();$(this).closest(".controls").find(".help-block").hide()}else if(e==""){S=!1;$(this).closest(".control-group").removeClass("success");$(this).closest(".controls").find(".icon-ok").hide()}T()});var T=function(){if(w&&E&&S==1){console.log("It's a valid form!");$("#emailformsubmitplaceholder").hide();$("#emailformsubmit").show()}else if(w||E||S==0){$("#emailformsubmitplaceholder").show();$("#emailformsubmit").hide()}};$("#emailformsubmitplaceholder").click(function(){console.log("it was clicked");T();if(E==0){$("#form-first-name").closest(".controls").find(".help-block").show();$("#form-first-name").closest(".controls").find(".icon-remove").show()}if(S==0){$("#form-last-name").closest(".controls").find(".help-block").show();$("#form-last-name").closest(".controls").find(".icon-remove").show()}if(w==0){$(this).closest(".control-group").removeClass("success");$("#input-email").closest(".controls").find(".help-block").show();$("#input-email").closest(".controls").find(".icon-remove").show()}});$("#contactform").submit(function(e){e.preventDefault();var t=$(this).serialize();$.ajax({url:"http://learn-dev.falmouth.ac.uk/login/send_form_email.php",type:"post",data:t,success:function(){$("#emailformsubmit").hide();$("#contactform .modal-body").animate({left:"1000px",opacity:0},400,"swing");$(".thankyou").animate({left:"0px",opacity:1},400,"swing")},error:function(){alert("Hmmm, something went wrong...")}})})}if($(".single-section").length!=0){$("#section-0").addClass("collapsed");$("#section-0").hover(function(){$(this).removeClass("collapsed").css("height","auto")},function(){$(this).addClass("collapsed").css("height","100px")})}$("#page-course-search #region-main > div > .coursebox:even").addClass("odd");var N=$(".pagelayout-course .single-section");$("#username").attr("placeholder","Username");$("#password").attr("placeholder","Password");$("input").on({click:function(){$(this).val()==$(this).attr("placeholder")&&$(this).val("")},blur:function(){$(this).val()==""&&$(this).val($(this).attr("placeholder"))}});if($(".section-navigation.header.headingblock>a.mdl-right").length!=0){var C=$(".section-navigation.header.headingblock>a.mdl-right"),k=$(".section-navigation.header.headingblock>a.mdl-right").attr("href");C.text("View all sections")}else C="";if(C.length!=0){var L=$('<a href="'+k+'" class="mdl-right">View all sections</a>');$(".sidr-class-block_navigation").append(L);$(".block_course_menu .block_tree").append(C)}else if(C.length==0){var A=document.body.id;$(".sidr-class-block_navigation").append('<a href="#" class="show-all-active">View all sections<a/>');A!="page-mod-page-view"&&$(".block_course_menu .block_tree").append('<a href="#" class="show-all-active">View all sections<a/>')}var O=$(".dropdown-menu").find("a");$(O).each(function(){$(this).parent().is("div")&&$(this).unwrap()});$(".content").find(".alert").each(function(){if($(this).hasClass("alert-error")){var e='<i class="icon-exclamation-sign"></i> ';$(this).prepend(e)}if($(this).hasClass("alert-success")){var e='<i class="icon-calendar"></i> ';$(this).prepend(e)}if($(this).hasClass("alert-info")){var e='<i class="icon-comment"></i> ';$(this).prepend(e)}});$(".content").find("blockquote").each(function(){var e='<i class="icon-quote-left"></i> ';$(this).prepend(e)});$(".section-navigation.mdl-bottom").find(".mdl-left").prepend('<i class="icon-chevron-left"></i> ');$(".section-navigation.mdl-bottom").find(".mdl-left").prepend("<h2>Previous section:</h2> ");$(".section-navigation.mdl-bottom").find(".mdl-right").append(' <i class="icon-chevron-right"></i>');$(".section-navigation.mdl-bottom").find(".mdl-right").prepend(" <h2>Next section:</h2>");$("p, span, h1, h2, h3, h4, h5, h6").removeAttr("style")});